{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Chart from 'chart.js/auto';\nimport { onMounted, onUnmounted, ref } from \"vue\";\nexport const drawChart = (ctx, time, ping) => {\n  if (Chart.getChart(ctx)) {\n    Chart.getChart(ctx)?.destroy();\n  }\n  console.log(\"drawChart\");\n  return new Promise(resolve => {\n    requestAnimationFrame(() => {\n      new Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: time,\n          datasets: [{\n            label: 'ping',\n            data: ping,\n            borderColor: 'rgb(75, 192, 192)',\n            backgroundColor: 'rgb(75, 192, 192)',\n            borderWidth: 3,\n            fill: false,\n            pointRadius: 0\n          }]\n        },\n        options: {\n          plugins: {\n            legend: {\n              position: 'bottom',\n              // 범례 위치\n              align: 'start' // 범례 수직 정렬\n            }\n          },\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            x: {\n              type: 'time',\n              time: {\n                unit: 'day',\n                displayFormats: {\n                  day: 'MM/dd'\n                }\n              }\n            },\n            y: {\n              min: 0,\n              max: 60000\n            }\n          }\n        }\n      });\n      resolve();\n    });\n  });\n};\nexport const useScrollLoad = (target, url) => {\n  const size = 10;\n  const list = ref([]);\n  const start = ref(0);\n  const load = () => {\n    fetchData();\n  };\n  const loadMore = () => {\n    start.value = start.value + size;\n    load();\n  };\n  const fetchData = () => {\n    fetch(url(start.value, size)).then(res => res.json()).then(res => {\n      list.value.push(...res);\n    });\n  };\n  const getScrollRest = element => {\n    const clientHeight = element.clientHeight;\n    const scrollHeight = element.scrollHeight;\n    const scrollTop = element.scrollTop;\n    return scrollHeight - scrollTop - clientHeight;\n  };\n  const handleScrollEvent = e => {\n    const bottom = getScrollRest(e.target);\n    if (bottom === 0) {\n      loadMore();\n    }\n  };\n  onMounted(() => {\n    if (!target.value) {\n      return;\n    }\n    load();\n    target.value.addEventListener(\"scroll\", handleScrollEvent);\n  });\n  onUnmounted(() => {\n    if (!target.value) {\n      return;\n    }\n    target.value.removeEventListener(\"scroll\", handleScrollEvent);\n  });\n  return {\n    list\n  };\n};","map":{"version":3,"names":["Chart","onMounted","onUnmounted","ref","drawChart","ctx","time","ping","getChart","destroy","console","log","Promise","resolve","requestAnimationFrame","type","data","labels","datasets","label","borderColor","backgroundColor","borderWidth","fill","pointRadius","options","plugins","legend","position","align","responsive","maintainAspectRatio","scales","x","unit","displayFormats","day","y","min","max","useScrollLoad","target","url","size","list","start","load","fetchData","loadMore","value","fetch","then","res","json","push","getScrollRest","element","clientHeight","scrollHeight","scrollTop","handleScrollEvent","e","bottom","addEventListener","removeEventListener"],"sources":["C:/test/test/test/src/common/common.js"],"sourcesContent":["import Chart from 'chart.js/auto';\r\nimport { onMounted, onUnmounted, ref,  } from \"vue\";\r\n\r\nexport const drawChart = (ctx, time, ping) => {\r\n  if (Chart.getChart(ctx)) {\r\n    Chart.getChart(ctx)?.destroy();\r\n  }\r\n    \r\n   console.log(\"drawChart\");\r\n   return new Promise(resolve => {\r\n    requestAnimationFrame(() => { \r\n    new Chart(ctx, {\r\n      type: 'line',\r\n      data: {\r\n        labels: time,\r\n        datasets: [{\r\n          label: 'ping',\r\n          data: ping,\r\n          borderColor: 'rgb(75, 192, 192)',\r\n          backgroundColor: 'rgb(75, 192, 192)',\r\n          borderWidth: 3,\r\n          fill: false,\r\n          pointRadius : 0\r\n        }]\r\n      },\r\n      options: {    \r\n        plugins: {\r\n            legend: {\r\n                position: 'bottom', // 범례 위치\r\n                align: 'start' // 범례 수직 정렬\r\n            }\r\n        },\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        scales: {\r\n          x: {\r\n            type: 'time',\r\n            time: {\r\n              unit: 'day',\r\n              displayFormats: {\r\n                day: 'MM/dd'\r\n              }\r\n            }\r\n          },\r\n          y: {\r\n            min: 0,\r\n            max: 60000\r\n          }\r\n        }\r\n      }\r\n    });\r\n    resolve();\r\n    });\r\n  });\r\n  };\r\n\r\n\r\n\r\n  export const useScrollLoad = (target, url) => {\r\n    const size = 10;\r\n  \r\n    const list = ref([]);\r\n    const start = ref(0);\r\n  \r\n    const load = () => {\r\n      fetchData();\r\n    };\r\n  \r\n    const loadMore = () => {\r\n      start.value = start.value + size;\r\n      load();\r\n    };\r\n  \r\n    const fetchData = () => {\r\n      fetch(url(start.value, size))\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          list.value.push(...res);\r\n        });\r\n    };\r\n  \r\n    const getScrollRest = (element) => {\r\n      const clientHeight = element.clientHeight;\r\n      const scrollHeight = element.scrollHeight;\r\n      const scrollTop = element.scrollTop;\r\n  \r\n      return scrollHeight - scrollTop - clientHeight;\r\n    };\r\n  \r\n    const handleScrollEvent = (e) => {\r\n      const bottom = getScrollRest(e.target);\r\n  \r\n      if (bottom === 0) {\r\n        loadMore();\r\n      }\r\n    };\r\n  \r\n    onMounted(() => {\r\n      if (!target.value) {\r\n        return;\r\n      }\r\n  \r\n      load();\r\n      target.value.addEventListener(\"scroll\", handleScrollEvent);\r\n    });\r\n  \r\n    onUnmounted(() => {\r\n      if (!target.value) {\r\n        return;\r\n      }\r\n  \r\n      target.value.removeEventListener(\"scroll\", handleScrollEvent);\r\n    });\r\n  \r\n    return { list };\r\n  };"],"mappings":";AAAA,OAAOA,KAAK,MAAM,eAAe;AACjC,SAASC,SAAS,EAAEC,WAAW,EAAEC,GAAG,QAAU,KAAK;AAEnD,OAAO,MAAMC,SAAS,GAAGA,CAACC,GAAG,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAC5C,IAAIP,KAAK,CAACQ,QAAQ,CAACH,GAAG,CAAC,EAAE;IACvBL,KAAK,CAACQ,QAAQ,CAACH,GAAG,CAAC,EAAEI,OAAO,CAAC,CAAC;EAChC;EAECC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EACxB,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAI;IAC7BC,qBAAqB,CAAC,MAAM;MAC5B,IAAId,KAAK,CAACK,GAAG,EAAE;QACbU,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE;UACJC,MAAM,EAAEX,IAAI;UACZY,QAAQ,EAAE,CAAC;YACTC,KAAK,EAAE,MAAM;YACbH,IAAI,EAAET,IAAI;YACVa,WAAW,EAAE,mBAAmB;YAChCC,eAAe,EAAE,mBAAmB;YACpCC,WAAW,EAAE,CAAC;YACdC,IAAI,EAAE,KAAK;YACXC,WAAW,EAAG;UAChB,CAAC;QACH,CAAC;QACDC,OAAO,EAAE;UACPC,OAAO,EAAE;YACLC,MAAM,EAAE;cACJC,QAAQ,EAAE,QAAQ;cAAE;cACpBC,KAAK,EAAE,OAAO,CAAC;YACnB;UACJ,CAAC;UACDC,UAAU,EAAE,IAAI;UAChBC,mBAAmB,EAAE,KAAK;UAC1BC,MAAM,EAAE;YACNC,CAAC,EAAE;cACDlB,IAAI,EAAE,MAAM;cACZT,IAAI,EAAE;gBACJ4B,IAAI,EAAE,KAAK;gBACXC,cAAc,EAAE;kBACdC,GAAG,EAAE;gBACP;cACF;YACF,CAAC;YACDC,CAAC,EAAE;cACDC,GAAG,EAAE,CAAC;cACNC,GAAG,EAAE;YACP;UACF;QACF;MACF,CAAC,CAAC;MACF1B,OAAO,CAAC,CAAC;IACT,CAAC,CAAC;EACJ,CAAC,CAAC;AACF,CAAC;AAID,OAAO,MAAM2B,aAAa,GAAGA,CAACC,MAAM,EAAEC,GAAG,KAAK;EAC5C,MAAMC,IAAI,GAAG,EAAE;EAEf,MAAMC,IAAI,GAAGzC,GAAG,CAAC,EAAE,CAAC;EACpB,MAAM0C,KAAK,GAAG1C,GAAG,CAAC,CAAC,CAAC;EAEpB,MAAM2C,IAAI,GAAGA,CAAA,KAAM;IACjBC,SAAS,CAAC,CAAC;EACb,CAAC;EAED,MAAMC,QAAQ,GAAGA,CAAA,KAAM;IACrBH,KAAK,CAACI,KAAK,GAAGJ,KAAK,CAACI,KAAK,GAAGN,IAAI;IAChCG,IAAI,CAAC,CAAC;EACR,CAAC;EAED,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACtBG,KAAK,CAACR,GAAG,CAACG,KAAK,CAACI,KAAK,EAAEN,IAAI,CAAC,CAAC,CAC1BQ,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAK;MACbR,IAAI,CAACK,KAAK,CAACK,IAAI,CAAC,GAAGF,GAAG,CAAC;IACzB,CAAC,CAAC;EACN,CAAC;EAED,MAAMG,aAAa,GAAIC,OAAO,IAAK;IACjC,MAAMC,YAAY,GAAGD,OAAO,CAACC,YAAY;IACzC,MAAMC,YAAY,GAAGF,OAAO,CAACE,YAAY;IACzC,MAAMC,SAAS,GAAGH,OAAO,CAACG,SAAS;IAEnC,OAAOD,YAAY,GAAGC,SAAS,GAAGF,YAAY;EAChD,CAAC;EAED,MAAMG,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAMC,MAAM,GAAGP,aAAa,CAACM,CAAC,CAACpB,MAAM,CAAC;IAEtC,IAAIqB,MAAM,KAAK,CAAC,EAAE;MAChBd,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC;EAED/C,SAAS,CAAC,MAAM;IACd,IAAI,CAACwC,MAAM,CAACQ,KAAK,EAAE;MACjB;IACF;IAEAH,IAAI,CAAC,CAAC;IACNL,MAAM,CAACQ,KAAK,CAACc,gBAAgB,CAAC,QAAQ,EAAEH,iBAAiB,CAAC;EAC5D,CAAC,CAAC;EAEF1D,WAAW,CAAC,MAAM;IAChB,IAAI,CAACuC,MAAM,CAACQ,KAAK,EAAE;MACjB;IACF;IAEAR,MAAM,CAACQ,KAAK,CAACe,mBAAmB,CAAC,QAAQ,EAAEJ,iBAAiB,CAAC;EAC/D,CAAC,CAAC;EAEF,OAAO;IAAEhB;EAAK,CAAC;AACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}